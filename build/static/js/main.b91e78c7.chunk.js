(this["webpackJsonpThere-And-Back-Again"]=this["webpackJsonpThere-And-Back-Again"]||[]).push([[0],{65:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c(29),a=c.n(n),r=c(2),o=c(6),i=c(12),l=c(36),j="https://there-and-back-end.herokuapp.com",d={login:function(e){return l.post("".concat(j,"/api/auth"),e)},signup:function(e){return l.post("".concat(j,"/api/users"),e)},getProfile:function(e){return l.get("".concat(j,"/api/users/me"),{headers:{authorization:"bearer ".concat(e)}})},allTrails:function(){return l.get("".concat(j,"/api/trails"))},allLotr:function(){return l.get("".concat(j,"/api/journey/lotr"))},logMiles:function(e,t){return l.put("".concat(j,"/api/users"),{userMiles:e},{headers:{authorization:"bearer ".concat(t)}})},trailLocation:function(e){return l.get("".concat(j,"/api/trails/").concat(e))},journeyBreakpoint:function(e){return l.get("".concat(j,"/api/users/journey"),{headers:{authorization:"bearer ".concat(e)}})}},u=c(0),b={formMiles:""};function h(e){var t=Object(s.useState)(Object(r.a)({},b)),c=Object(o.a)(t,2),n=c[0],a=c[1];return Object(u.jsxs)("div",{className:"col-sm-12 col-md-5 col-md-5 section",children:[Object(u.jsx)("h3",{children:"Log The Miles You Have Walked"}),Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),console.log("current user miles "+e.user.userMiles),console.log(n);var c=parseInt(n.formMiles)+parseInt(e.user.userMiles);console.log("updated user miles "+c),alert("logged! New total "+c),d.logMiles(c,e.token).then((function(e){console.log(e),window.location.reload()}))},children:[Object(u.jsx)("input",{type:"number",id:"mileLog",placeholder:"log miles",name:"formMiles",value:n.formMiles,onChange:function(e){a(Object(r.a)(Object(r.a)({},n),{},Object(i.a)({},e.target.name,e.target.value)))}}),Object(u.jsx)("button",{type:"submit",children:"Log Miles"})]})]})}Object.freeze(b);var O={center:{textAlign:"center"}};function m(e){var t,c,s,n;return Object(u.jsx)("div",{className:"container section center",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("section",{className:"col-sm-12 col-md-6 col-lg-6",children:[Object(u.jsxs)("h3",{children:["You just left ",null===(t=e.journeyStop)||void 0===t?void 0:t.name]}),Object(u.jsxs)("p",{children:["You walked ",null===(c=e.journeyStop)||void 0===c?void 0:c.distance," miles"]})]}),Object(u.jsxs)("section",{style:O.center,className:"col-sm-12 col-md-6 col-lg-6",children:[Object(u.jsx)("p",{children:null===(s=e.journeyStop)||void 0===s?void 0:s.description}),Object(u.jsx)("img",{src:null===(n=e.journeyStop)||void 0===n?void 0:n.url})]})]})})}function x(e){var t=Object(s.useState)({token:"",user:{}}),c=Object(o.a)(t,2),n=(c[0],c[1],Object(s.useState)({name:"Bag End- The Shire",distance:0,description:"Gandalf arrives at Bag End to celebrate the 111th birthday of Frodo\u2019s uncle, Bilbo. Bilbo leaves the Ring to Frodo. Once it is found by Gandalf, he insists the Frodo leave the Shire. Frodo departs the Shire with his friend Samwise Gamgee.",url:"https://i.postimg.cc/MZyYy8ys/cntraveler-visiting-the-shire-by-drone.jpg"})),a=Object(o.a)(n,2),r=a[0],i=a[1];return Object(s.useEffect)((function(){console.log("########"),d.journeyBreakpoint(e.token).then((function(e){console.log(e.data),i(e.data)})).catch((function(e){console.log(e)}))}),[e.token]),Object(u.jsx)("div",{className:"container center",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-sm-12 col-md-5 col-md-5 section",children:Object(u.jsx)("img",{src:e.user.avatar,alt:"Your Avatar"})}),Object(u.jsx)(h,{user:e.user,token:e.token}),Object(u.jsx)(m,{journeyStop:r})]})})}var p=c(67);function g(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)({location:""}),l=Object(o.a)(a,2),j=l[0],b=l[1];Object(s.useEffect)((function(){d.allTrails().then((function(e){console.log(e),n(e.data)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"container section center",children:[Object(u.jsx)("h2",{children:"Find A Trail Near You"}),Object(u.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(),console.log("----------"),d.trailLocation(j.location).then((function(e){n(e.data),console.log(e.data)})).catch((function(e){console.log(e)}))},children:[Object(u.jsx)("input",{name:"location",placeholder:"Search by City or National Park i.e. Seattle ",value:j.location,onChange:function(e){b(Object(r.a)(Object(r.a)({},j),{},Object(i.a)({},e.target.name,e.target.value)))}}),Object(u.jsx)("button",{children:"Search"})]})]}),Object(u.jsx)("div",{className:"container center",children:c.map((function(e){return Object(u.jsx)("div",{className:" section row",children:Object(u.jsxs)("section",{className:"col-sm-12 col-md-6 col-lg-6",children:[Object(u.jsx)("h2",{children:e.name}),Object(u.jsx)("hr",{}),Object(u.jsxs)("p",{children:["Park: ",e.parkName]}),Object(u.jsxs)("p",{children:["Distance: ",e.distance]}),Object(u.jsxs)("p",{children:["City, State: ",e.location,", ",e.state]}),Object(u.jsxs)("p",{children:["Description: ",e.description]})]})},e._id)}))})]})}var v=c(13);function f(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),c=(t[0],t[1]);return Object(s.useEffect)((function(){d.allLotr().then((function(e){console.log(e),c(e.data)}))}),[]),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"container center",children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-sm-12 col-md-5 col-lg-5 center",children:[Object(u.jsxs)(v.b,{to:"/journey/lotr",id:"lotrBtn",value:"journey",children:[" ",Object(u.jsx)("img",{src:"https://i.postimg.cc/2Smk0q6L/51h5k-RXyip-L-AC-SX466.jpg",alt:"LOTR Journey Card"})," "]}),Object(u.jsx)("h3",{children:"Lord of the Rings"})]}),Object(u.jsxs)("div",{className:"col-sm-12 col-md-5 col-lg-5 center",children:[Object(u.jsxs)("button",{children:[" ",Object(u.jsx)("img",{src:"https://i.postimg.cc/sfqCNMnD/91-T5b-Tv-HRc-L-AC.jpg",alt:"Journey Card"})," "]}),Object(u.jsx)("h3",{children:"The Hobbit (coming soon)"})]})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-sm-12 col-md-5 col-lg-5 center",children:[Object(u.jsxs)("button",{children:[" ",Object(u.jsx)("img",{src:"https://i.postimg.cc/hPZsrmMp/68004cf9767ee6787c2e7dad7cb1f43e.jpg",alt:"Journey Card"})," "]}),Object(u.jsx)("h3",{children:"Game of Thrones - Winterfell to Kings Landing (coming soon)"})]}),Object(u.jsxs)("div",{className:"col-sm-12 col-md-5 col-lg-5 center",children:[Object(u.jsxs)("button",{children:[" ",Object(u.jsx)("img",{src:"https://i.postimg.cc/T17Vt8jp/d566854c23033e5614aa2be7831e127a.png",alt:"Journey Card"})," "]}),Object(u.jsx)("h3",{children:"Game of Thrones - Winterfell to the Wall (coming soon)"})]})]})]})})}function k(){return Object(u.jsxs)("div",{className:"container section center",children:[Object(u.jsx)("h3",{children:"Choose a Journey"}),Object(u.jsx)(f,{})]})}function y(){return Object(u.jsxs)("div",{className:"container section",children:[Object(u.jsx)("h3",{children:"Date"}),Object(u.jsx)("p",{children:"Miles Walked "}),Object(u.jsx)("p",{children:"Notes"})," ",Object(u.jsx)("textarea",{})]})}function w(){return Object(u.jsx)("div",{children:Object(u.jsx)(y,{})})}var N={foot:{verticalAlign:"middle"}};function S(){return Object(u.jsx)("div",{style:N.foot,className:"container center section",children:Object(u.jsx)("p",{children:" Created by The Fellowship"})})}var M={img:{width:"100%"}};function C(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1];return Object(s.useEffect)((function(){d.allLotr().then((function(e){n(e.data)}))}),[]),Object(u.jsx)("div",{className:"container center",children:c.map((function(e){return Object(u.jsxs)("div",{className:" section row",children:[Object(u.jsxs)("section",{className:"col-sm-12 col-md-6 col-lg-6",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:e.name})}),Object(u.jsx)("hr",{}),Object(u.jsxs)("h2",{children:["Distance: ",e.distance," miles"]}),Object(u.jsx)("div",{class:"journeyDesc",children:Object(u.jsxs)("p",{children:[" ",e.description,", "]})})]},e._id),Object(u.jsx)("section",{className:"col-sm-12 col-md-6 col-lg-6",class:"text-center",children:Object(u.jsx)("img",{class:"img-container",style:M.img,src:e.url,alt:"LOTR Journey"})})]})}))})}var T=c(4);function A(){var e=Object(s.useState)({email:"",password:""}),t=Object(o.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)({email:"",password:"",username:""}),i=Object(o.a)(a,2),l=i[0],j=i[1],b=Object(s.useState)({token:"",user:{}}),h=Object(o.a)(b,2),O=h[0],m=h[1];Object(s.useEffect)((function(){var e=localStorage.getItem("token");console.log(e),e?d.getProfile(e).then((function(t){console.log(t.data),m({token:e,user:{email:t.data.email,password:t.data.password,username:t.data.username,_id:t.data._id,userMiles:t.data.userMiles,avatar:t.data.avatar}})})).catch((function(e){console.log(e),console.log("no logged in user"),m({token:"",user:{}})})):console.log("no token provided")}),[]);return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(v.a,{children:[Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"container section center",children:[Object(u.jsx)("h1",{children:"There and Back Again"}),O.token?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("nav",{children:[Object(u.jsx)(v.b,{to:"/journeys",children:"Journeys"}),Object(u.jsx)(v.b,{to:"/users/:id",children:"My Profile"}),Object(u.jsx)(v.b,{to:"/mywalks",children:"My Walks"}),Object(u.jsx)(v.b,{to:"/trailfinder",children:"Trail Finder"}),Object(u.jsx)(v.b,{to:"/",onClick:function(){m({token:"",user:{}}),localStorage.removeItem("token")},children:"Logout"})]})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("nav",{children:Object(u.jsx)(v.b,{to:"/trailfinder",children:"Trail Finder"})})})]})}),Object(u.jsx)("div",{className:"container center section",children:O.token?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(T.a,{to:"/users/".concat(O.user._id)})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-sm-12 col-md-5 col-lg-5",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d.login(c).then((function(e){console.log(e.data),alert("logged in!"),localStorage.setItem("token",e.data.token),m(Object(r.a)(Object(r.a)({},O),{},{token:e.data.token,user:{email:e.data.user.email,username:e.data.user.username,password:e.data.user.password,_id:e.data.user._id,userMiles:e.data.user.userMiles,avatar:e.data.user.avatar}}))})).catch((function(e){console.log("error occured"),console.log(e),localStorage.removeItem("token"),m({token:"",user:{}})})),n({email:"",password:""})},children:[Object(u.jsx)("input",{name:"email",placeholder:"email",class:"userAuth",value:c.email,onChange:function(e){return n(Object(r.a)(Object(r.a)({},c),{},{email:e.target.value}))}}),Object(u.jsx)("input",{name:"password",type:"password",placeholder:"password",class:"userAuth",value:c.password,onChange:function(e){return n(Object(r.a)(Object(r.a)({},c),{},{password:e.target.value}))}}),Object(u.jsx)("input",{type:"submit",value:"Login",class:"authBtn"})]})}),Object(u.jsx)("div",{className:"col-sm-12 col-md-5 col-lg-5",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d.signup(l).then((function(e){console.log(e.data),alert("Sign up Success!"),localStorage.setItem("token",e.data.token),m(Object(r.a)(Object(r.a)({},O),{},{token:e.data.token,user:{email:e.data.user.email,username:e.data.user.username,password:e.data.user.password,_id:e.data.user._id,userMiles:e.data.user.userMiles,avatar:e.data.user.avatar}}))})).catch((function(e){console.log("error occured"),console.log(e),localStorage.removeItem("token"),m({token:"",user:{}})})),j({username:"",email:"",password:""})},children:[Object(u.jsx)("input",{name:"email",placeholder:"email",class:"userAuth",value:l.email,onChange:function(e){return j(Object(r.a)(Object(r.a)({},l),{},{email:e.target.value}))}}),Object(u.jsx)("input",{name:"username",placeholder:"username",class:"userAuth",value:l.username,onChange:function(e){return j(Object(r.a)(Object(r.a)({},l),{},{username:e.target.value}))}}),Object(u.jsx)("input",{name:"password",placeholder:"password",type:"password",class:"userAuth",value:l.password,onChange:function(e){return j(Object(r.a)(Object(r.a)({},l),{},{password:e.target.value}))}}),Object(u.jsx)("input",{type:"submit",value:"Signup",class:"authBtn"})]})})]})})}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)(T.d,{children:[Object(u.jsx)(T.b,{exact:!0,path:"/",children:Object(u.jsx)(k,{})}),Object(u.jsx)(T.b,{exact:!0,path:"/users/:id",children:Object(u.jsx)(x,{user:O.user,token:O.token})}),Object(u.jsx)(T.b,{exact:!0,path:"/journeys",children:Object(u.jsx)(k,{})}),Object(u.jsx)(T.b,{exact:!0,path:"/journey/lotr",children:Object(u.jsx)(C,{})}),Object(u.jsx)(T.b,{exact:!0,path:"/trailfinder",children:Object(u.jsx)(g,{})}),Object(u.jsx)(T.b,{exact:!0,path:"/mywalks",children:Object(u.jsx)(w,{user:O.user,token:O.token})})]}),Object(u.jsx)(S,{})]})})]})})}c(64);a.a.render(Object(u.jsx)(A,{}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.b91e78c7.chunk.js.map